/* ========== THEME (Dark + Neon Purple) ========== */
:root{
  --bg-0:#080a0f;
  --bg-1:#0c111a;
  --bg-2:#0f1724;
  --glass:#111827cc;       /* translucent card */
  --border:#243046;
  --ink:#e6e9f2;
  --muted:#90a0bd;

  --purple:#a78bfa;        /* accent */
  --purple-strong:#8b5cf6;
  --cyan:#22d3ee;
  --ring:rgba(167,139,250,.35);
  --chip:#1b2435;
}
*{box-sizing:border-box}
html,body{height:100%}
body.theme-dark{
  margin:0; font-family:Inter,system-ui,Segoe UI,Roboto; color:var(--ink);
  background:
    radial-gradient(800px 400px at 85% -10%, rgba(139,92,246,.25), transparent 60%),
    radial-gradient(700px 400px at 20% 110%, rgba(34,211,238,.18), transparent 60%),
    linear-gradient(180deg, var(--bg-1), var(--bg-0));
}

/* Glass utility */
.glass{
  background:var(--glass);
  border:1px solid var(--border);
  box-shadow: 0 10px 30px rgba(0,0,0,.35), 0 0 0 0.5px rgba(255,255,255,.02) inset;
  backdrop-filter: blur(10px) saturate(1.1);
}
.soft{box-shadow: 0 8px 18px rgba(0,0,0,.25)}

/* Header */
.header{
  position:sticky; top:0; z-index:10;
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 20px; border-radius:18px; margin:12px; 
}
.brand{display:flex; align-items:center; gap:12px}
.logo{width:40px; height:40px; filter: drop-shadow(0 0 10px rgba(167,139,250,.45))}
.brand-text h1{margin:0; font-size:18px}
.brand-text p{margin:0; font-size:12px; color:var(--muted)}
.actions{display:flex; align-items:center; gap:12px}

/* Controls */
.select,.btn,.input{
  border-radius:14px; border:1px solid var(--border); background:var(--bg-2);
  color:var(--ink); padding:10px 12px; font:inherit; outline:none;
}
.select:focus,.input:focus{box-shadow:0 0 0 4px var(--ring)}
.btn{cursor:pointer; transition:.15s}
.btn:hover{box-shadow:0 6px 18px rgba(139,92,246,.25)}
.btn.ghost{background:transparent}
.btn.primary{
  background:linear-gradient(135deg,var(--purple),var(--purple-strong));
  color:#0b0815; border:none;
  box-shadow: 0 10px 26px rgba(139,92,246,.35);
}
.btn.icon{display:grid; place-items:center; padding:8px 10px}
.btn.icon img{width:18px; height:18px; filter: invert(1) drop-shadow(0 0 6px rgba(167,139,250,.35));}
.input{flex:1}

/* Header mode toggle */
.mode-toggle{display:flex; align-items:center; gap:6px; padding:4px; border-radius:999px; border:1px solid var(--border);}
.mode-toggle span{font-size:12px; color:var(--muted)}
.mode-toggle .seg{
  border:none; background:transparent; color:var(--ink); padding:6px 10px; border-radius:999px; cursor:pointer; font-weight:600;
}
.mode-toggle .seg.active{
  background:linear-gradient(135deg, rgba(167,139,250,.25), rgba(139,92,246,.25));
  border:1px solid rgba(167,139,250,.35);
}

/* Layout */
.main{max-width:1280px; margin:12px auto 22px; display:grid; grid-template-columns:minmax(560px,1fr) 380px; gap:16px; padding:0 12px}
@media (max-width: 980px){ .main{grid-template-columns:1fr} .right{order:-1} }

/* Chat */
.chat{border-radius:18px; display:flex; flex-direction:column; height:78vh}
.chat-window{flex:1; overflow:auto; padding:16px; display:flex; flex-direction:column; gap:12px}
.msg-block{display:flex}
.bubble{
  max-width:82%; padding:12px 14px; border-radius:16px;
  border:1px solid var(--border); background:rgba(16,22,34,.85);
  box-shadow: 0 8px 22px rgba(0,0,0,.35);
}
.bubble.bot{align-self:flex-start}
.bubble.user{
  align-self:flex-end;
  background:linear-gradient(135deg, rgba(167,139,250,.18), rgba(139,92,246,.18));
  border:1px solid rgba(167,139,250,.35);
}

.composer{
  display:flex; align-items:center; gap:8px; padding:12px; border-radius:0 0 18px 18px;
  border-top:1px solid var(--border);
}

/* Right column */
.right{display:flex; flex-direction:column; gap:16px}
.panel{border-radius:16px; padding:12px}
.panel h3{margin:0 0 8px}
.grid{display:grid; grid-template-columns:1fr 1fr; gap:10px}
.col-2{grid-column:span 2}
.toggles{display:flex; flex-direction:column; gap:6px; margin-top:8px}
.toggle{display:flex; align-items:center; gap:8px; font-size:14px; color:var(--ink)}
.disclaimer{font-size:12px; color:var(--muted); margin-top:8px}
.row{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
.hsep{height:1px; background:var(--border); margin:10px 0}

/* Chips & lists */
.chips{display:flex; flex-wrap:wrap; gap:6px}
.chip{
  background:var(--chip); border:1px solid var(--border); padding:6px 10px; border-radius:999px; font-size:12px;
  display:flex; align-items:center; gap:6px; color:var(--ink)
}
.chip button{all:unset; cursor:pointer; color:var(--purple)}
.list{padding-left:16px}
.list li{margin:6px 0; color:var(--ink)}

/* Cards (for inner answers) */
.kcard{
  border:1px solid var(--border); border-radius:12px; padding:10px;
  background:linear-gradient(180deg, rgba(16,22,34,.9), rgba(12,18,28,.9));
}
.krow{display:flex; gap:12px; flex-wrap:wrap}

/* Tabs */
.tabs{display:flex; gap:8px}
.tab{
  flex:1; border-radius:999px; border:1px solid var(--border); padding:10px 12px; background:var(--bg-2);
  color:var(--ink); cursor:pointer; font-weight:600;
}
.tab.active{
  background:linear-gradient(135deg, rgba(167,139,250,.22), rgba(139,92,246,.18));
  border-color: rgba(167,139,250,.35);
}
.tabpanel{display:none}
.tabpanel.active{display:block}

/* Modal */
.modal.hidden{display:none}
.modal .modal-card{max-width:620px; margin:80px auto; border-radius:16px; padding:10px}
.modal .modal-head{display:flex; justify-content:space-between; align-items:center; padding:6px 6px}
.modal .modal-body{padding:4px 8px}

/* Inputs on dark */
input, select { color-scheme: dark; }
